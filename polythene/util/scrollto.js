"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _mithril=require("mithril");var _mithril2=_interopRequireDefault(_mithril);var requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}.call();var easeInOutQuad=function easeInOutQuad(t,b,c,d){t/=d/2;if(t<1){return c/2*t*t+b}t--;return-c/2*(t*(t-2)-1)+b};var scrollTo=function scrollTo(opts){var element=opts.element;var which=opts.which;var to=opts.to;var duration=opts.duration;var start=element[which];var change=to-start;var animationStart=(new Date).getTime();var animating=true;var lastpos=null;var deferred=_mithril2["default"].deferred();var animateScroll=function animateScroll(){if(!animating){return}requestAnimFrame(animateScroll);var now=(new Date).getTime();var val=Math.floor(easeInOutQuad(now-animationStart,start,change,duration));if(lastpos){if(lastpos===element[which]){lastpos=val;element[which]=val}else{animating=false}}else{lastpos=val;element[which]=val}if(now>animationStart+duration){element[which]=to;animating=false;deferred.resolve()}};requestAnimFrame(animateScroll);return deferred.promise};exports["default"]=scrollTo;module.exports=exports["default"];