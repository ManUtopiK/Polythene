@import "../polythene/polythene";

.ripple {
	$_start_scale: 0.1;
	$_end_scale: 2;
	$_start_opacity: 0.2;
	$_end_opacity: 0;

	color: inherit;
	border-radius: inherit;
	// Prevent flickering
	transform:translate3d(0,0,0);

	&.noink {
		pointer-events: none;
	}

	&.constrained {
		border-radius: inherit;
		// Fix issue with Safari that does not correctly mask a shape when border-radius is set
		// Note: no overflow:hidden (breaks Chrome)
	    mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
	}
	
	.ripple-mask {
		@include fit;
	}
	&.constrained {
		.ripple-mask {
			overflow: hidden;
		}
	}
	// Firefox needs overflow: hidden; but this breaks Chrome. Use this hack:
	_:-moz-tree-row(hover), &.constrained {
		overflow: hidden;
	}

	.ripple-waves {
		display: block;
		position: absolute;
		border-radius: 100%;
		transform: scale($_start_scale);

		// default durations; finally set in js
		animation-duration: $surfaceReactionDuration;
		opacity: $_start_opacity;
		pointer-events: none;
		display: none;

		&.animated {
			display: block;
			animation: ripple ease-out;
		}
	}

	@keyframes ripple {
		100% {
			transform: scale($_end_scale);
			opacity: $_end_opacity;
		}
	}
}

[disabled] .ripple {
	pointer-events: none;
}
